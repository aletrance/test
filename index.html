<!-- ...El head y los días 1, 2 y 3 igual que antes... -->

  <div class="tabs">
    <button class="tab active" data-tab="dia1">Día 1</button>
    <button class="tab" data-tab="dia2">Día 2</button>
    <button class="tab" data-tab="dia3">Día 3</button>
    <button class="tab" data-tab="washington">4 de Julio: Washington DC</button>
  </div>

  <!-- ...Los días 1, 2 y 3 igual que antes... -->

  <!-- 4 de Julio: Washington DC -->
  <div id="washington" class="tabcontent">
    <div class="map-container" id="map-washington"></div>
    <div class="itinerary">
      <h2>Itinerario 4 de Julio: Washington DC</h2>
      <ol>
        <li><span class="horario">08:00</span> <strong>Catedral Nacional de Washington</strong>: Visita una de las iglesias más impresionantes del país.</li>
        <li><span class="horario">09:00</span> <strong>Universidad de Georgetown</strong>: Recorrido por el histórico campus y su entorno pintoresco.</li>
        <li><span class="horario">09:45</span> <strong>Old Stone House</strong>: Una de las casas más antiguas de DC, situada en el corazón de Georgetown.</li>
        <li><span class="horario">11:00</span> <strong>Museo Nacional del Aire y el Espacio</strong>: Entrada reservada. Disfruta de las exhibiciones de la aviación y el espacio.</li>
        <li><span class="horario">14:00</span> <strong>Almuerzo y paseo por el National Mall</strong>: Relájate y disfruta de los jardines y monumentos cercanos.</li>
        <li><span class="horario">16:00</span> <strong>Capitolio</strong>: Entrada reservada. Tour por el edificio icónico del Congreso de los Estados Unidos.</li>
      </ol>
      <ul>
        <li><strong>Transporte recomendado:</strong> Uber/Lyft entre Catedral y Georgetown, luego metro o bus hacia el National Mall y Capitolio.</li>
      </ul>
    </div>
    <div class="eat">
      <h3>¿Dónde comer barato en Washington DC?</h3>
      <ul>
        <li><strong>Shake Shack</strong> (800 F St NW): Hamburguesas y papas.</li>
        <li><strong>Food trucks en el National Mall</strong>: Gran variedad y precios accesibles.</li>
        <li><strong>Good Stuff Eatery</strong> (303 Pennsylvania Ave SE): Hamburguesas cerca del Capitolio.</li>
        <li><strong>Georgetown Cupcake</strong> (3301 M St NW): Para un postre típico en Georgetown.</li>
      </ul>
    </div>
    <div class="tips">
      <h3>Tips adicionales para el 4 de Julio</h3>
      <ul>
        <li>Reserva con anticipación tus traslados; hay mucha demanda por el feriado nacional.</li>
        <li>Lleva agua y protector solar, el clima suele ser caluroso y húmedo.</li>
        <li>Llega al menos 15 minutos antes a tus reservas en el museo y el Capitolio.</li>
        <li>El National Mall es ideal para disfrutar del ambiente festivo y los fuegos artificiales si te quedas hasta la noche.</li>
        <li>Al ser feriado, muchos lugares pueden estar más llenos de lo habitual. Paciencia y ¡disfruta el 4 de julio en la capital!</li>
      </ul>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
    // Tabs
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tabcontent').forEach(tc => tc.classList.remove('active'));
        this.classList.add('active');
        document.getElementById(this.dataset.tab).classList.add('active');
      });
    });

    // MAPAS GOOGLE DIRECTIONS API
    let mapsLoaded = false;
    function loadGoogleMapsScript() {
      if (mapsLoaded) return;
      mapsLoaded = true;
      let script = document.createElement('script');
      script.src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyBZKxlKu8Vxe3xrtdH8AhcBvkfnwG3TxAQ&callback=initAllMaps";
      script.async = true;
      document.body.appendChild(script);
    }
    window.addEventListener('DOMContentLoaded', loadGoogleMapsScript);

    function addMarkers(map, points) {
      for (let i = 0; i < points.length; i++) {
        new google.maps.Marker({ position: points[i], map: map, title: points[i].label });
      }
    }

    function showRoute(map, points, color="#0099cc") {
      const directionsService = new google.maps.DirectionsService();
      const directionsRenderer = new google.maps.DirectionsRenderer({
        suppressMarkers: true,
        polylineOptions: { strokeColor: color, strokeWeight: 4 }
      });
      directionsRenderer.setMap(map);

      let waypoints = [];
      for (let i = 1; i < points.length - 1; i++) {
        waypoints.push({
          location: points[i],
          stopover: true
        });
      }

      directionsService.route({
        origin: points[0],
        destination: points[points.length-1],
        waypoints: waypoints,
        travelMode: "DRIVING"
      }, function(response, status) {
        if (status === "OK") {
          directionsRenderer.setDirections(response);
        }
      });
      addMarkers(map, points);
    }

    function initAllMaps() {
      // Día 1: Central Park, Midtown, High Line, Chelsea Market, Grand Central y Top of the Rock
      let map1 = new google.maps.Map(document.getElementById('map-dia1'), {
        center: {lat: 40.7648, lng: -73.9787},
        zoom: 13
      });
      let dia1_points = [
        {lat: 40.7829, lng: -73.9654, label: "Central Park"},
        {lat: 40.758465, lng: -73.976865, label: "Catedral de San Patricio"},
        {lat: 40.747993, lng: -74.004765, label: "High Line (entrada sur)"},
        {lat: 40.7420, lng: -74.0060, label: "Chelsea Market"},
        {lat: 40.7527, lng: -73.9772, label: "Grand Central Terminal"},
        {lat: 40.7587, lng: -73.9787, label: "Top of the Rock"}
      ];
      showRoute(map1, dia1_points, "#0099cc");

      // Día 2: Downtown, Chinatown y Brooklyn Bridge
      let map2 = new google.maps.Map(document.getElementById('map-dia2'), {
        center: {lat: 40.7127, lng: -74.0060},
        zoom: 13
      });
      let dia2_points = [
        {lat: 40.7033, lng: -74.0170, label: "Battery Park"},
        {lat: 40.7061, lng: -74.0087, label: "Wall Street & Charging Bull"},
        {lat: 40.7126, lng: -74.0099, label: "Oculus & World Trade Center"},
        {lat: 40.7158, lng: -73.9970, label: "Chinatown"},
        {lat: 40.7061, lng: -73.9969, label: "Brooklyn Bridge (entrada Manhattan)"}
      ];
      showRoute(map2, dia2_points, "#e67e22");

      // Día 3: Empire State y alrededores
      let map3 = new google.maps.Map(document.getElementById('map-dia3'), {
        center: {lat: 40.7549, lng: -73.9840},
        zoom: 13
      });
      let dia3_points = [
        {lat: 40.748817, lng: -73.985428, label: "Empire State Building"},
        {lat: 40.7536, lng: -73.9832, label: "Bryant Park"},
        {lat: 40.7532, lng: -73.9822, label: "Biblioteca Pública de Nueva York"},
        {lat: 40.7580, lng: -73.9855, label: "Times Square"}
      ];
      showRoute(map3, dia3_points, "#27ae60");

      // 4 de Julio: Washington DC
      let mapWashington = new google.maps.Map(document.getElementById('map-washington'), {
        center: {lat: 38.8977, lng: -77.0365},
        zoom: 12
      });
      let washington_points = [
        {lat: 38.9306, lng: -77.0706, label: "Catedral Nacional de Washington"},
        {lat: 38.9076, lng: -77.0723, label: "Universidad de Georgetown"},
        {lat: 38.9040, lng: -77.0624, label: "Old Stone House"},
        {lat: 38.8882, lng: -77.0199, label: "Museo Nacional del Aire y el Espacio"},
        {lat: 38.8899, lng: -77.0091, label: "Capitolio"}
      ];
      showRoute(mapWashington, washington_points, "#ff5252");
    }

    window.initAllMaps = initAllMaps;
  </script>
</body>
</html>